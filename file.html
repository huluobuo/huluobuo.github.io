<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–‡ä»¶åº“</title>
    <link rel="stylesheet" href="./css/file.css">
</head>
<body>
    <div class="header">
        <a href="./index.html" class="back-link">â† è¿”å›é¦–é¡µ</a>
        <h1>ğŸ“ æ–‡ä»¶åº“</h1>
    </div>

    <div class="container">
        <div id="fileList" class="file-list">
            <div class="loading">åŠ è½½ä¸­...</div>
        </div>
    </div>

    <script>
        async function loadFiles() {
            try {
                const response = await fetch('./api/filelist.json');
                const files = await response.json();
                
                const fileList = document.getElementById('fileList');
                fileList.innerHTML = '';

                if (files.length === 0) {
                    fileList.innerHTML = '<div class="loading">æš‚æ— æ–‡ä»¶</div>';
                    return;
                }

                files.forEach((file, index) => {
                    const card = document.createElement('div');
                    card.className = 'file-card';
                    card.style.animationDelay = `${index * 0.1}s`;
                    
                    const icon = 'ğŸ“¦';
                    const filePath = file.path.startsWith('./') ? file.path : `./${file.path}`;
                    
                    card.innerHTML = `
                        <div class="file-icon">${icon}</div>
                        <div class="file-name">${file.name}</div>
                        <div class="file-size">å¤§å°: ${file.size}</div>
                        <div class="file-description">${file.description || 'æ— æè¿°'}</div>
                        <a href="${filePath}" class="download-btn" download>ä¸‹è½½æ–‡ä»¶</a>
                    `;
                    
                    fileList.appendChild(card);
                });
            } catch (error) {
                document.getElementById('fileList').innerHTML = 
                    '<div class="loading">åŠ è½½å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•</div>';
                console.error('åŠ è½½æ–‡ä»¶åˆ—è¡¨å¤±è´¥:', error);
            }
        }

        loadFiles();
    </script>
</body>
</html>

